let e,t;const n={background:!0,fullscreen:!0,abort:c,loadURL:async(e,n)=>{o();let r=await fetch(e);t=r.body.getReader();let l=[],d={url:e,typ:r.headers.get("Content-Type"),len:r.headers.get("Content-Length"),enc:r.headers.get("Content-Encoding"),rec:0};for(;;){const{done:e,value:o}=await t.read();if(e)break;l.push(o),d.rec+=o.length,a(o,d.rec,d.len,d.enc),n&&n(d)}let i=new Uint8Array(d.rec),s=0;for(let e of l)i.set(e,s),s+=e.length;d.dat=i,c(),n&&n(d)}};function o(){c();const t=document.createElement("canvas");t.id="copperbars";const o=n.background?-604:604;t.style="position:absolute;top:0;left:0;width:100%;height:100%;image-rendering:pixelated;z-index:"+o+";",document.getElementById("copperbars")||document.body.appendChild(t),e=t.getContext("2d",{alpha:!n.background})}function c(){t&&t.cancel(),document.getElementById("copperbars")&&document.body.removeChild(document.getElementById("copperbars"))}function a(t,o,c,a,l){let d=r(1,200,o/c);"br"===a&&(d=e.canvas.clientHeight/2),"gzip"===a&&(d=e.canvas.clientHeight/3),d>t.length/3&&(d=t.length/3),e.canvas.width=d,e.canvas.height=d;for(let n=0,o=0;n<d;n++){const c="rgb("+t[o++]+", "+t[o++]+", "+t[o++]+")";e.strokeStyle=c,e.beginPath(),e.moveTo(0,n),e.lineTo(d,n),e.stroke()}n.fullscreen||e.clearRect(.05*d,.05*d,.9*d,.9*d)}function r(e,t,n){return(1-n)*e+n*t}export{n as LDR};